/* ============================================
   DESKTOP CSS - Main & About Pages
   ============================================ */

/* Desktop Layout */
@media (min-width: 1024px) {
  /* Desktop-only visibility rules */
  .desktop-only { display: contents !important; }
  .mobile-only { display: none !important; }
  :root {
    --edge-fluid: clamp(28px, 6vh, 72px);
    --measure: clamp(38ch, 42vw, 50ch);
  }

  /* Site frame uses the same rhythm on desktop */
  .site-frame {
    padding-block: var(--edge-fluid);
    padding-inline: var(--edge-fluid);
    min-height: 100dvh;
  }

  /* Make the six-cell grid the single source of truth */
  .em {
    display: grid;
    grid-template-columns: minmax(360px, 800px) var(--space-lg, 32px) 1fr;
    /* equal, fluid top/bottom spacers; center row hugs content */
    grid-template-rows: minmax(var(--edge-fluid), 1fr) max-content minmax(var(--edge-fluid), 1fr);
    column-gap: 0;
    row-gap: 0;
    min-height: calc(100dvh - 2 * var(--edge-fluid));
    align-items: stretch;
  }

  /* Map each slot to its cell + alignment */
  .em [data-id="left-top"] { grid-column: 1; grid-row: 1; align-self: center; justify-self: center; }
  .em [data-id="left-middle"] { grid-column: 1; grid-row: 2; place-self: center center; }
  .em [data-id="left-bottom"] { grid-column: 1; grid-row: 3; align-self: center; justify-self: center; }

  .em [data-id="right-top"] { grid-column: 3; grid-row: 1; align-self: center; justify-self: start; padding-right: var(--space-lg, 32px); }
  .em [data-id="right-middle"] { 
    grid-column: 3; 
    grid-row: 2; 
    place-self: center start; 
    padding-right: var(--space-lg, 32px);
    position: relative;
  }
  
  /* Break the client list out of the grid to float independently */
  .em [data-id="right-middle"]:has(.about-prose[role="listbox"]) {
    position: relative;
  }
  
  .em [data-id="right-middle"] .about-prose[role="listbox"] {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: max-content;
    min-width: 200px;
  }
  .em [data-id="right-bottom"] { grid-column: 3; grid-row: 3; align-self: center; justify-self: start; padding-right: var(--space-lg, 32px); }

  /* Remove the old nested system completely */
  .em [data-id="right-block"] { all: unset; display: contents; }

  /* Small, surgical margin normalizations so links/headings don't reintroduce spacing */
  [data-id="right-top"] > *, 
  [data-id="right-bottom"] > * { margin: 0 }

  [data-id="right-middle"] .about-prose {
    margin: 0;
  }
  [data-id="right-middle"] .about-prose > :first-child { margin-top: 0 }
  [data-id="right-middle"] .about-prose > :last-child { margin-bottom: 0 }

  /* === Unified size utilities === */
  .fs-logo { font-size: var(--fs-logo); }
  .fs-right { font-size: var(--fs-right); }
  .fs-contact { font-size: var(--fs-contact); }

  /* Families (assumes --font-sans / --font-serif are already defined) */
  .sans { font-family: var(--font-sans); }
  .serif { font-family: var(--font-serif); }

  /* Right-column prose block:
     - The block's root defines the shared size (fs-right).
     - Headlines/links use sans; body text uses serif, BOTH inherit the same size. */
  .about-prose {
    font-size: var(--fs-right);
    line-height: 1.4;
    color: var(--accent, #1c4cff);
    margin: 0;
  }
  .about-prose > * { margin: 0; }
  .about-prose h1,
  .about-prose h2,
  .about-prose h3,
  .about-prose strong,
  .about-prose a,
  .about-prose button {
    font-family: var(--font-sans);
    font-size: inherit;
    font-weight: 400; /* Fixed: Kaarle & Kumpp only has weight 400 */
    line-height: 1.1;
    text-transform: uppercase;
    letter-spacing: .04em;
  }
  .about-prose p,
  .about-prose em,
  .about-prose i {
    font-family: var(--font-serif);
    font-size: inherit;
    line-height: 1.45;
    font-style: normal;
  }
  .about-prose em,
  .about-prose i { font-style: italic; }

  /* Right-column canonical sans look - GUARD: weight 400, synthesis none */
  .right-sans,
  [data-id="right-block"] h1,
  [data-id="right-block"] h2,
  [data-id="right-block"] a,
  .nav-right { 
    font-family: var(--font-sans) !important; 
    font-size: var(--fs-right); 
    font-weight: 400 !important; /* Fixed: Kaarle & Kumpp only has weight 400 */
    font-synthesis: none !important; /* Prevent synthetic bold */
    text-transform: uppercase; 
    letter-spacing: .04em;
    line-height: 1.1;
    font-variation-settings: normal;
    font-feature-settings: "liga" 1, "kern" 1;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  /* Contact line: one shared size, mix families per span */
  .contact-line,
  .contact {
    font-size: var(--fs-contact);
    line-height: 1.1;
    display: flex;
    gap: .35rem;
    flex-wrap: wrap;
    align-items: baseline;
    margin: 0;
    padding: 0;
  }
  .contact__name { font-family: var(--font-sans); font-weight: 400; /* Fixed: Kaarle & Kumpp only has weight 400 */ }
  .contact__phone { font-family: var(--font-serif); font-weight: 500; }
  .contact__email,
  a.contact__email { 
    font-family: var(--font-serif) !important; 
    font-weight: 500 !important; 
    font-style: italic !important; 
    text-decoration: none !important; 
    color: inherit !important; 
    background-color: transparent !important;
  }

  /* Neutralize space-y utility that adds extra margin-top */
  .about-prose.space-y-sm > * + *,
  .about-prose .space-y-sm > * + * {
    margin-top: 0 !important;
  }

  /* Paragraph rhythm: natural spacing between paragraphs */
  .about-prose p {
    margin: 0 0 1.2em 0 !important;  /* spacing between paragraphs */
    line-height: 1.35 !important;      /* tighter for block reading */
  }
  .about-prose p:last-child {
    margin-bottom: 0 !important;
  }

  /* Headings in the prose block: SANS-SERIF to match nav links */
  .about-prose h1,
  .about-prose .kicker {
    font-family: var(--font-sans) !important;
    font-size: inherit !important;  /* inherit from container (var(--fs-right)) */
    font-weight: 400 !important; /* Fixed: Kaarle & Kumpp only has weight 400 */
    text-transform: uppercase !important;
    letter-spacing: .04em !important;
    line-height: 1.1 !important;
    font-variation-settings: normal !important;
    font-feature-settings: "liga" 1, "kern" 1 !important;
    -webkit-font-smoothing: antialiased !important;
    text-rendering: optimizeLegibility !important;
    margin-top: 0 !important;
    margin-bottom: 1em !important;  /* match paragraph spacing */
  }
  
  /* Force override for any conflicting rules */
  .em [data-id="right-block"] .about-prose h1,
  .em [data-id="right-block"] .about-prose .kicker {
    margin-bottom: 1em !important;
  }
  
  /* Last kicker at bottom: space before it */
  .about-prose .kicker:last-child {
    margin-top: 1em !important;
    margin-bottom: 0 !important;
  }

  /* Normalize the logo block so utilities don't add unexpected space */
  .logo {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1;                 /* tighter, prevents extra line box height */
  }
  .logo .text-center { margin: 0 !important; }

  /* Normalize the contact line wrapper */
  .contact-line,
  .contact {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Safety: neutralize any width:100% utilities on the logo wrapper */
  .logo, .contact-line, .left-cell {
    width: auto !important;
    max-width: none !important;
  }

  /* Nav */
  a[href="/works"], a[href="/about"] {
    font-family: var(--font-sans);
    text-transform: uppercase; 
    letter-spacing: .04em;
  }
}

/* Logo styles */
.logo .text-center {
  text-align: center;
  line-height: 1.1;
}

.logo .apple-logo::before {
  content: "\F8FF";
  font-family: "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
}